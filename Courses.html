<!DOCTYPE html>
<html lang="en"> <!-- Default to English, JS will set based on localStorage -->
<head>
    <meta charset="UTF-8">
    <title data-key="pageTitle">Embedded EG Courses</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Embedded EG" />
    <meta property="og:description" content="نطور مهارات اطفال المستقبل 🚀💻 تعليم البرمجة و الدوائر الالكترونية و صناعة الروبوتات للأطفال بطريقة ممتعة و تفاعلية 🎓💡 انضموا لينا و علموا اولادكم المستقبل 🤖" />
    <meta property="og:image" content="./link logo.png" />
    <meta property="og:url" content="https://example.com/your-page" />
    <meta property="og:type" content="website" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="Embedded EG" />
    <meta name="twitter:title" content="@EMBEDDED_EG" />
    <meta name="twitter:description" content="نطور مهارات اطفال المستقبل 🚀💻 تعليم البرمجة و الدوائر الالكترونية و صناعة الروبوتات للأطفال بطريقة ممتعة و تفاعلية 🎓💡 انضموا لينا و علموا اولادكم المستقبل 🤖" />
    <meta name="twitter:image" content="./link logo.png" />

    <!-- Favicon -->
    <link rel="icon" href="./Logo(EMBEDDED).png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <!-- Embedded Styles -->
    <style>
        /* --- CSS Variables (Updated for new design) --- */
        :root {
            --color-background-dark: #01050b; /* Deep dark background */
            --color-primary-blue: #12439c; /* Primary accent blue */
            --color-secondary-blue: #1a56c2; /* Slightly lighter blue for accents/hover */
            --color-text-light: #E0E6F6; /* Light text for readability */
            --color-text-muted: #A0A8B8; /* Muted text for secondary info */
            --color-card-bg: rgba(10, 20, 40, 0.7); /* Slightly transparent card background */
            --color-white: #FFFFFF; /* Pure white for highlights/hover */

            --font-heading: 'Outfit', sans-serif;
            --font-body: 'Outfit', sans-serif;
            --font-arabic: 'Cairo', sans-serif; /* Arabic font */
            --font-monospace: 'monospace';

            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;
            --spacing-xxl: 4rem; /* New larger spacing */

            --border-radius-sm: 8px;
            --border-radius-md: 12px;
            --border-radius-lg: 16px;
            --border-radius-pill: 50px;

            --transition-speed: 0.4s;
            --transition-timing-function: ease-in-out;
            --box-shadow-light: 0 6px 20px rgba(0, 0, 0, 0.25);
            --box-shadow-dark: 0 12px 40px rgba(0, 0, 0, 0.5);
            --box-shadow-glow: 0 0 25px rgba(18, 67, 156, 0.6), 0 0 50px rgba(18, 67, 156, 0.4); /* Subtle blue glow */

            --card-size-desktop: 28vw;
            --card-size-tablet: 40vw;
            --card-size-mobile: 80vw;
            --card-max-width: 400px;
        }

        /* --- Base Styles --- */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            height: 100%;
        }

        body {
            font-family: var(--font-body);
            font-weight: 400;
            background: linear-gradient(to bottom, var(--color-background-dark) 0%, #030b19 50%, var(--color-primary-blue) 100%);
            color: var(--color-text-light);
            height: 100vh; /* Set body to full viewport height */
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Prevent all scrolling on body by default */
            line-height: 1.7;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            position: relative; /* Needed for particles.js */
        }

        /* Particles.js container */
        #particles-js {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1; /* Send to back */
            background-color: transparent; /* Ensure it doesn't block body gradient */
        }

        /* Apply Arabic font where dir="rtl" is used */
        [dir="rtl"] {
            font-family: var(--font-arabic);
            font-weight: 600; /* Increased weight for better visibility */
        }

        /* --- Header & Typing Effect --- */
        .header {
            padding-top: var(--spacing-xl);
            text-align: center;
            margin-bottom: var(--spacing-lg);
            flex-shrink: 0; /* Prevent header from shrinking */
            z-index: 1; /* Ensure header is above particles */
            position: relative; /* For language switcher positioning */
        }

        .wrapper {
            display: grid;
            place-items: center;
        }

        .typing-demo {
            width: 22ch;
            animation: typing 2s steps(22), blink .5s step-end infinite alternate;
            white-space: nowrap;
            overflow: hidden;
            border-right: 3px solid var(--color-white); /* Changed to white for contrast */
            font-family: var(--font-heading);
            font-weight: 700;
            font-size: 3em;
            color: var(--color-white); /* Changed to white */
            text-shadow: 0 0 8px var(--color-primary-blue); /* Shadow remains blue */
        }

        @keyframes typing {
            from { width: 0 }
        }

        @keyframes blink {
            50% { border-color: transparent }
        }

        /* Language Switcher */
        .language-switcher {
            position: absolute;
            top: var(--spacing-md);
            right: var(--spacing-md);
            z-index: 100;
        }

        .language-switcher button {
            background-color: rgba(18, 67, 156, 0.7);
            color: var(--color-white);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--border-radius-pill);
            padding: 0.5em 1em;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease, color 0.3s ease, transform 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5em;
        }

        .language-switcher button:hover {
            background-color: var(--color-white);
            color: var(--color-primary-blue);
            transform: translateY(-3px);
            box-shadow: var(--box-shadow-light);
        }

        /* --- Main Content --- */
        .main-content {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-sm) var(--spacing-sm) var(--spacing-xxl);
            overflow: hidden;
            z-index: 1; /* Ensure main content is above particles */
        }

        /* --- Carousel --- */
        .carousel-section {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .carousel {
            display: flex;
            overflow-x: scroll;
            scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            padding: var(--spacing-md) var(--spacing-xxl);
            gap: var(--spacing-lg);
            max-width: 100vw;
            height: 55vh; /* Slightly increased carousel height */
            max-height: 550px; /* Adjusted max height */
            perspective: 450px;
            margin-top: 0; /* Removed margin-top */
            scrollbar-width: thin;
            scrollbar-color: var(--color-primary-blue) var(--color-card-bg);
            cursor: grab;
            will-change: scroll-position;
        }

        .carousel::-webkit-scrollbar {
            height: 8px;
        }

        .carousel::-webkit-scrollbar-track {
            background: var(--color-card-bg);
            border-radius: var(--border-radius-pill);
        }

        .carousel::-webkit-scrollbar-thumb {
            background-color: var(--color-primary-blue);
            border-radius: var(--border-radius-pill);
            border: 2px solid var(--color-card-bg);
        }

        .carousel.active-drag {
            cursor: grabbing;
        }

        .carousel__item {
            flex: 0 0 auto;
            scroll-snap-align: center;
            width: var(--card-size-desktop);
            height: var(--card-size-desktop);
            max-width: var(--card-max-width);
            max-height: var(--card-max-width);
            box-shadow: var(--box-shadow-light);
            border-radius: var(--border-radius-lg);
            transition: transform var(--transition-speed) var(--transition-timing-function), box-shadow var(--transition-speed) var(--transition-timing-function);
            will-change: transform, box-shadow;
            border: 1px solid rgba(255, 255, 255, 0.05);
            animation: glow 10s infinite alternate; /* Added glow animation to cards */
        }

        /* Glowing effect for cards */
        @keyframes glow {
          0% {
            box-shadow: var(--box-shadow-light), 0 0 20px rgba(18, 67, 156, 0.4);
          }
          100% {
            box-shadow: var(--box-shadow-dark), 0 0 40px rgba(18, 67, 156, 0.8);
          }
        }

        .carousel__item.is-active {
            transform: scale(1.03);
            box-shadow: var(--box-shadow-dark);
        }

        /* Carousel Navigation Buttons */
        .carousel-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(18, 67, 156, 0.7);
            color: var(--color-white);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            cursor: pointer;
            z-index: 50;
            box-shadow: var(--box-shadow-light);
            transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease, opacity 0.3s ease;
            opacity: 0.8; /* Slightly transparent by default */
        }

        .carousel-nav-btn:hover {
            background-color: var(--color-white);
            color: var(--color-primary-blue);
            transform: translateY(-50%) scale(1.1); /* Slight scale effect */
            box-shadow: var(--box-shadow-dark);
            opacity: 1; /* Fully opaque on hover */
        }

        .carousel-nav-btn.prev-btn {
            left: var(--spacing-md); /* Position from left */
        }

        .carousel-nav-btn.next-btn {
            right: var(--spacing-md); /* Position from right */
        }

        /* --- Card --- */
        .card {
            border-radius: var(--border-radius-lg);
            position: relative;
            overflow: hidden;
            box-shadow: none;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            background-color: var(--color-card-bg); /* Semi-transparent card background */
            backdrop-filter: blur(5px); /* Frosted glass effect */
            -webkit-backdrop-filter: blur(5px);
        }

        .card__image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: var(--border-radius-lg);
            display: block;
            transition: transform var(--transition-speed) var(--transition-timing-function), filter var(--transition-speed) var(--transition-timing-function);
            will-change: transform, filter;
        }

        .card.is-revealed .card__image {
            filter: blur(8px) brightness(0.6);
            transform: scale(1.1);
        }

        .card__overlay {
            width: 100%;
            height: 0;
            background: linear-gradient(to top, var(--color-background-dark) 0%, rgba(18, 67, 156, 0.8) 50%, transparent 100%);
            border-radius: var(--border-radius-lg);
            position: absolute;
            left: 0;
            bottom: 0;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: var(--spacing-sm) var(--spacing-md);
            text-align: center;
            font-size: var(--spacing-sm);
            transition: height var(--transition-speed) var(--transition-timing-function);
            will-change: height;
            pointer-events: none;
        }

        .card.is-revealed .card__overlay {
            height: 100%;
            pointer-events: auto;
        }

        .card__title {
            font-family: var(--font-heading);
            font-weight: 700;
            font-size: 2.4rem;
            letter-spacing: 0.5px;
            color: var(--color-white);
            margin-bottom: var(--spacing-xs);
            text-shadow: 0 3px 10px rgba(0,0,0,0.6);
            opacity: 0;
            transform: translateY(30px);
            transition: opacity var(--transition-speed) var(--transition-timing-function) 0.1s,
                        transform var(--transition-speed) var(--transition-timing-function) 0.1s;
            will-change: opacity, transform;
        }

        .card.is-revealed .card__title {
            opacity: 1;
            transform: translateY(0);
        }

        .card__description {
            font-family: var(--font-body);
            font-weight: 400;
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--color-text-light);
            margin-bottom: var(--spacing-md);
            opacity: 0;
            transform: translateY(30px);
            transition: opacity var(--transition-speed) var(--transition-timing-function) 0.2s,
                        transform var(--transition-speed) var(--transition-timing-function) 0.2s;
            will-change: opacity, transform;
        }

        .card.is-revealed .card__description {
            opacity: 1;
            transform: translateY(0);
        }

        .card__button {
            display: inline-block;
            color: var(--color-white);
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 600;
            background: var(--color-primary-blue);
            border-radius: var(--border-radius-pill);
            padding: 0.7em 1.8em;
            margin-bottom: var(--spacing-md);
            transition: background-color var(--transition-speed) var(--transition-timing-function), color var(--transition-speed) var(--transition-timing-function), transform var(--transition-speed) var(--transition-timing-function);
            box-shadow: var(--box-shadow-light);
            opacity: 0;
            transform: translateY(30px);
            transition: opacity var(--transition-speed) var(--transition-timing-function) 0.3s,
                        transform var(--transition-speed) var(--transition-timing-function) 0.3s;
            will-change: opacity, transform;
        }

        .card__button:hover {
            background-color: var(--color-white);
            color: var(--color-primary-blue);
            transform: translateY(-5px);
            box-shadow: var(--box-shadow-dark);
        }

        .card.is-revealed .card__button {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Footer --- */
        .footer {
            position: relative;
            width: 100%;
            background: transparent; /* Removed background to blend with body gradient */
            min-height: 100px;
            padding: var(--spacing-md) var(--spacing-xl) var(--spacing-lg); /* Adjusted padding */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
            overflow: hidden;
            box-shadow: none; /* Removed box-shadow as it's now part of the body gradient */
            z-index: 1; /* Ensure footer is above particles */
        }

        .footer__social-icons,
        .footer__menu {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: var(--spacing-sm) 0;
            list-style: none;
            z-index: 10;
        }

        .footer__social-icons li a {
            font-size: 2.2em;
            color: var(--color-text-muted);
            margin: 0 var(--spacing-sm);
            display: inline-block;
            transition: transform var(--transition-speed) var(--transition-timing-function), color var(--transition-speed) var(--transition-timing-function);
            will-change: transform, color;
        }

        .footer__social-icons li a:hover {
            transform: translateY(-8px) scale(1.15);
            color: var(--color-white);
        }

        .footer__menu li a {
            font-family: var(--font-body);
            font-weight: 600;
            font-size: 1.2em;
            color: var(--color-text-muted);
            margin: 0 var(--spacing-sm);
            display: inline-block;
            transition: color var(--transition-speed) var(--transition-timing-function), opacity var(--transition-speed) var(--transition-timing-function);
            text-decoration: none;
            opacity: 0.8;
            will-change: opacity, color;
        }

        .footer__menu li a:hover {
            opacity: 1;
            color: var(--color-white);
        }

        .footer__copyright {
            font-family: var(--font-body);
            font-weight: 400;
            color: var(--color-text-muted);
            text-align: center;
            margin-top: var(--spacing-sm);
            margin-bottom: var(--spacing-xs);
            font-size: 1.05em;
            opacity: 0.7;
            z-index: 10;
        }

        /* Wave and Animation */
        .footer__waves {
            position: absolute;
            top: -85px;
            left: 0;
            width: 100%;
            height: 90px;
            overflow: hidden;
            z-index: 1;
        }

        .footer__wave {
            position: absolute;
            width: 100%;
            height: 100px;
            background: url(https://i.ibb.co/rZt4Nhg/wave.png);
            background-size: 1000px 100px;
            will-change: background-position-x;
        }

        #wave1 { z-index: 1000; opacity: 0.8; bottom: 0; animation: animateWave 4s linear infinite; }
        #wave2 { z-index: 999; opacity: 0.4; bottom: 10px; animation: animateWave_02 4s linear infinite; }
        #wave3 { z-index: 1000; opacity: 0.15; bottom: 0; animation: animateWave 3s linear infinite; }
        #wave4 { z-index: 999; opacity: 0.6; bottom: 20px; animation: animateWave_02 3s linear infinite; }

        @keyframes animateWave {
            0%{ background-position-x: 1000px; }
            100%{ background-position-x: 0px; }
        }

        @keyframes animateWave_02 {
            0%{ background-position-x: 0px; }
            100%{ background-position-x: 1000px; }
        }

        /* --- Responsive Design --- */
        @media (max-width: 992px) {
            .typing-demo {
                font-size: 2.5em;
                width: 22ch;
            }

            .carousel__item {
                width: var(--card-size-tablet);
                height: var(--card-size-tablet);
            }

            .card__title {
                font-size: 2rem;
            }

            .card__description {
                font-size: 1.05rem;
            }
            .card__button {
                font-size: 1.05rem;
            }
            .footer__menu li a {
                font-size: 1.1em;
            }
            .footer__copyright {
                font-size: 1em;
            }

            /* Responsive adjustments for buttons */
            .carousel-nav-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2em;
            }
            .carousel-nav-btn.prev-btn {
                left: var(--spacing-sm);
            }
            .carousel-nav-btn.next-btn {
                right: var(--spacing-sm);
            }
            .carousel {
                padding: var(--spacing-md) var(--spacing-xl);
            }
            .language-switcher {
                top: var(--spacing-sm);
                right: var(--spacing-sm);
            }
            .language-switcher button {
                font-size: 0.9rem;
                padding: 0.4em 0.8em;
            }
        }

        @media (max-width: 600px) {
            body {
                overflow-y: auto; /* Allow scroll on small screens if content overflows */
            }
            .header {
                padding-top: var(--spacing-md);
                margin-bottom: var(--spacing-sm);
            }
            .typing-demo {
                font-size: 1.8em;
                width: 22ch;
                border-right-width: 2px;
            }

            .main-content {
                padding-bottom: var(--spacing-lg);
            }

            .carousel {
                height: 60vh;
                max-height: 400px;
                padding: var(--spacing-sm) var(--spacing-lg);
                gap: var(--spacing-md);
            }

            .carousel__item {
                width: var(--card-size-mobile);
                height: var(--card-size-mobile);
            }

            .card__overlay {
                padding: var(--spacing-xs) var(--spacing-sm);
            }

            .card__title {
                font-size: 1.8rem;
            }

            .card__description {
                font-size: 0.95rem;
                line-height: 1.6;
            }

            .card__button {
                font-size: 0.95rem;
                padding: 0.6em 1.5em;
            }

            .footer {
                padding: var(--spacing-sm) var(--spacing-md);
            }

            .footer__social-icons li a {
                font-size: 2em;
                margin: 0 var(--spacing-xs);
            }

            .footer__menu li a {
                font-size: 1em;
                margin: 0 var(--spacing-xs);
            }

            .footer__copyright {
                font-size: 0.95em;
            }

            /* Responsive adjustments for buttons on small screens */
            .carousel-nav-btn {
                width: 35px;
                height: 35px;
                font-size: 1em;
                top: calc(50% + 20px);
            }
            .carousel-nav-btn.prev-btn {
                left: var(--spacing-xs);
            }
            .carousel-nav-btn.next-btn {
                right: var(--spacing-xs);
            }
        }

        @media (max-width: 400px) {
            .typing-demo {
                font-size: 1.5em;
                width: 22ch;
            }
        }

        /* --- Modal Styles --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--color-card-bg);
            color: var(--color-text-light);
            padding: var(--spacing-lg);
            border-radius: var(--border-radius-lg);
            max-width: 650px;
            width: 90%;
            box-shadow: var(--box-shadow-dark);
            position: relative;
            opacity: 0;
            transform: scale(0.8) translateY(50px);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55), opacity 0.3s ease-out;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .modal-overlay.active .modal-content {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        /* Animation for closing (Apple-like minimize) */
        .modal-overlay.closing .modal-content {
            opacity: 0;
            transform: scale(0.2) translate(-50vw, 50vh);
            transform-origin: bottom left;
            transition: transform 0.5s cubic-bezier(0.6, 0.04, 0.98, 0.335), opacity 0.4s ease-out;
        }

        .modal-close-button {
            position: sticky;
            top: 0;
            float: right;
            background: none;
            border: none;
            font-size: 2.2rem;
            color: var(--color-text-muted);
            cursor: pointer;
            transition: color 0.2s ease-in-out, transform 0.2s ease-in-out;
            z-index: 10;
            padding: 0.2em;
        }

        .modal-close-button:hover {
            color: var(--color-white);
            transform: rotate(90deg);
        }

        .modal-title {
            font-family: var(--font-heading);
            font-weight: 700;
            font-size: 2.2rem;
            color: var(--color-primary-blue);
            margin-bottom: var(--spacing-sm);
            text-align: center;
            line-height: 1.2;
        }

        .modal-description {
            font-family: var(--font-body);
            font-weight: 400;
            font-size: 1.15rem;
            line-height: 1.8;
            color: var(--color-text-light);
            margin-bottom: var(--spacing-md);
            text-align: justify;
            padding-right: 10px;
        }

        /* Specific style for Arabic text in modal description */
        .modal-description[dir="rtl"] {
            font-family: var(--font-arabic);
            font-weight: 700;
        }

        /* Custom scrollbar for modal content */
        .modal-content::-webkit-scrollbar {
            width: 8px;
        }

        .modal-content::-webkit-scrollbar-track {
            background: var(--color-background-dark);
            border-radius: var(--border-radius-pill);
        }

        .modal-content::-webkit-scrollbar-thumb {
            background-color: var(--color-primary-blue);
            border-radius: var(--border-radius-pill);
            border: 2px solid var(--color-background-dark);
        }

        .modal-contact-button {
            display: inline-block;
            color: var(--color-white);
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 600;
            background: var(--color-primary-blue);
            border-radius: var(--border-radius-pill);
            padding: 0.7em 1.8em;
            transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out;
            box-shadow: var(--box-shadow-light);
            margin-top: var(--spacing-sm);
            text-align: center;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        .modal-contact-button:hover {
            background-color: var(--color-white);
            color: var(--color-primary-blue);
            transform: translateY(-3px);
        }

        /* Responsive adjustments for modal */
        @media (max-width: 600px) {
            .modal-content {
                padding: var(--spacing-md);
                width: 95%;
                max-width: unset;
            }
            .modal-title {
                font-size: 1.8rem;
            }
            .modal-description {
                font-size: 1rem;
            }
            .modal-contact-button {
                font-size: 1rem;
                padding: 0.6em 1.5em;
            }
            .modal-close-button {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Particles.js container -->
    <div id="particles-js"></div>

    <header class="header">
        <div class="language-switcher">
            <button id="language-toggle-btn">
                <i class="fas fa-globe"></i>
                <span data-key="langToggleText">English</span>
            </button>
        </div>
        <div class="wrapper">
            <h1 class="typing-demo">
                <span data-key="headerPrefix">Embedded EG</span> <span class="fa-fade" style="--fa-animation-duration: 2s; --fa-fade-opacity: 0.6;" data-key="headerSuffix">Courses</span>.
            </h1>
        </div>
    </header>

    <main class="main-content">
        <section class="carousel-section">
            <button class="carousel-nav-btn prev-btn" aria-label="Previous slide"><i class="fas fa-chevron-left"></i></button>
            <div class="carousel">
                <div class="carousel__item" data-course-id="arduino">
                    <div class="card">
                        <img src="./2.png" alt="Arduino Course for Kids" class="card__image" />
                        <div class="card__overlay">
                            <h3 class="card__title" data-key="arduinoTitle">Arduino Course For Kids</h3>
                            <p class="card__description" data-key="arduinoShortDesc">
                                <br>- علم ابنك البرمجة و الدوائر الالكترونية و صناعة الروبوتات 💻
                                <br>- مناسب من عمر ٨ سنوات 🧒
                            </p>
                            <a href="javascript:void(0);" class="card__button" data-action="open-modal" data-key="readMoreBtn">Read More</a>
                        </div>
                    </div>
                </div>
                <div class="carousel__item" data-course-id="htmlcss">
                    <div class="card">
                        <img src="./3.png" alt="HTML & CSS Course for Kids" class="card__image" />
                        <div class="card__overlay">
                            <h3 class="card__title" data-key="htmlcssTitle">HTML&CSS For Kids</h3>
                            <p class="card__description" data-key="htmlcssShortDesc">
                                <br>علم ابنك تصميم المواقع الان 🌐
                                <br>- تعلم لغة Html و Css 📚
                                <br>- مناسب من عمر ٧ سنوات 🧒
                            </p>
                            <a href="javascript:void(0);" class="card__button" data-action="open-modal" data-key="readMoreBtn">Read More</a>
                        </div>
                    </div>
                </div>
                <div class="carousel__item" data-course-id="bootstrap">
                    <div class="card">
                        <img src="./4.png" alt="Bootstrap Course for Kids" class="card__image" />
                        <div class="card__overlay">
                            <h3 class="card__title" data-key="bootstrapTitle">Bootstrap For Kids</h3>
                            <p class="card__description" data-key="bootstrapShortDesc">

                                <br>- تعلم ازاي ينشئ مواقع متوافقة مع جميع الشاشات 📱💻
                                <br>- مناسب من عمر ٧ سنوات 🧒
                                <br>- يشترط معرفة:
                                <br>- لغة Html و Css 📚
                            </p>
                            <a href="javascript:void(0);" class="card__button" data-action="open-modal" data-key="readMoreBtn">Read More</a>
                        </div>
                    </div>
                </div>
                <div class="carousel__item" data-course-id="scratch">
                    <div class="card">
                        <img src="https://i.ibb.co/M5yWgp7x/SCRATCH.png" alt="Scratch Course" class="card__image" />
                        <div class="card__overlay">
                            <h3 class="card__title" data-key="scratchTitle">Scratch</h3>
                            <p class="card__description" data-key="scratchShortDesc">
                                سكراتش هو برنامج ممتع لتعليم الأطفال أساسيات البرمجة من خلال تصميم ألعاب وقصص تفاعلية بطريقة سهلة ومرئية 🎮📖
                                مناسب للأطفال من عمر 6 سنوات فما فوق!<br>
                            </p>
                            <a href="javascript:void(0);" class="card__button" data-action="open-modal" data-key="readMoreBtn">Read More</a>
                        </div>
                    </div>
                </div>
                <div class="carousel__item" data-course-id="python">
                    <div class="card">
                        <img src="https://i.ibb.co/1fLzdHcP/PYTHON.png" alt="Python Course" class="card__image" />
                        <div class="card__overlay">
                            <h3 class="card__title" data-key="pythonTitle">Python</h3>
                            <p class="card__description" data-key="pythonShortDesc">
                                كورس بايثون للأطفال من سن 8 سنوات، بنبدأ من الأساسيات لحد الاحتراف بطريقة عملية وتفاعلية، مع متابعة خطوة بخطوة وتنفيذ مشاريع حقيقية
                            </p>
                            <a href="javascript:void(0);" class="card__button" data-action="open-modal" data-key="readMoreBtn">Read More</a>
                        </div>
                    </div>
                </div>
                <div class="carousel__item" data-course-id="icdl">
                    <div class="card">
                        <img src="https://i.ibb.co/99WckMFj/ICDL.png" alt="ICDL Course" class="card__image" />
                        <div class="card__overlay">
                            <h3 class="card__title" data-key="icdlTitle">ICDL</h3>
                            <p class="card__description" data-key="icdlShortDesc">
                                كورس ICDL للأطفال! 🧑‍💻
                                هنتعلم مع بعض باوربوينت، إكسل، ووورد بشكل بسيط وممتع خطوة بخطوة 🎉✨
                            </p>
                            <a href="javascript:void(0);" class="card__button" data-action="open-modal" data-key="readMoreBtn">Read More</a>
                        </div>
                    </div>
                </div>
                <div class="carousel__item" data-course-id="coming-soon">
                    <div class="card">
                        <img src="./5.png" alt="Coming Soon" class="card__image" />
                        <div class="card__overlay">
                            <h3 class="card__title" data-key="comingSoonTitle">Comming Soon</h3>
                            <a href="javascript:void(0);" class="card__button" data-action="open-modal" data-key="readMoreBtn">Read More</a>
                        </div>
                    </div>
                </div>
            </div>
            <button class="carousel-nav-btn next-btn" aria-label="Next slide"><i class="fas fa-chevron-right"></i></button>
        </section>
    </main>

    <footer class="footer">
        <div class="footer__waves">
            <div class="footer__wave" id="wave1"></div>
            <div class="footer__wave" id="wave2"></div>
            <div class="footer__wave" id="wave3"></div>
            <div class="footer__wave" id="wave4"></div>
        </div>
        <ul class="footer__social-icons">
            <li><a href="https://www.facebook.com/share/1LXZ8p8D1Q/" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a></li>
            <li><a href="https://wa.me/+201022613174" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a></li>
            <li><a href="https://www.tiktok.com/@embedded_eg?_t=ZS-8wlhPwncFQf&_r=1" aria-label="TikTok"><i class="fab fa-tiktok"></i></a></li>
            <li><a href="https://www.instagram.com/embedded_eg?igsh=MWFwb24wNGQyNnBwcA==" aria-label="Instagram"><i class="fab fa-instagram"></i></a></li>
        </ul>
        <ul class="footer__menu">
            <li><a href="./index.html" data-key="homeLink">Home</a></li>
            <li><a href="https://wa.me/+201022613174" data-key="contactUsLink">Contact Us</a></li>
        </ul>
        <p class="footer__copyright fa-fade" style="--fa-animation-duration: 2s; --fa-fade-opacity: 0.6;" data-key="copyrightText"> &copy; 2025 Embedded_EG | All Rights Reserved</p>
    </footer>

    <!-- Modal Structure -->
    <div class="modal-overlay" id="courseModal">
        <div class="modal-content">
            <button class="modal-close-button" id="closeModalBtn">&times;</button>
            <h3 class="modal-title" id="modalCourseTitle"></h3>
            <p class="modal-description" id="modalCourseDescription"></p>
            <a href="https://wa.me/+201022613174" class="modal-contact-button" target="_blank" data-key="modalContactBtn">تواصل معنا عبر واتساب</a>
        </div>
    </div>

    <!-- Font Awesome JavaScript (for icon animations like fa-fade) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>

    <!-- Particles.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script>
        /* particles.js config */
        particlesJS('particles-js', {
            "particles": {
                "number": {
                    "value": 80,
                    "density": {
                        "enable": true,
                        "value_area": 800
                    }
                },
                "color": {
                    "value": "#ffffff"
                },
                "shape": {
                    "type": "circle",
                    "stroke": {
                        "width": 0,
                        "color": "#000000"
                    },
                    "polygon": {
                        "nb_sides": 5
                    },
                    "image": {
                        "src": "img/github.svg",
                        "width": 100,
                        "height": 100
                    }
                },
                "opacity": {
                    "value": 0.5,
                    "random": false,
                    "anim": {
                        "enable": false,
                        "speed": 1,
                        "opacity_min": 0.1,
                        "sync": false
                    }
                },
                "size": {
                    "value": 3,
                    "random": true,
                    "anim": {
                        "enable": false,
                        "speed": 40,
                        "size_min": 0.1,
                        "sync": false
                    }
                },
                "line_linked": {
                    "enable": true,
                    "distance": 150,
                    "color": "#12439c", /* Lines match primary blue */
                    "opacity": 0.4,
                    "width": 1
                },
                "move": {
                    "enable": true,
                    "speed": 6,
                    "direction": "none",
                    "random": false,
                    "straight": false,
                    "out_mode": "out",
                    "bounce": false,
                    "attract": {
                        "enable": false,
                        "rotateX": 600,
                        "rotateY": 1200
                    }
                }
            },
            "interactivity": {
                "detect_on": "canvas",
                "events": {
                    "onhover": {
                        "enable": true,
                        "mode": "grab"
                    },
                    "onclick": {
                        "enable": true,
                        "mode": "push"
                    },
                    "resize": true
                },
                "modes": {
                    "grab": {
                        "distance": 140,
                        "line_linked": {
                            "opacity": 1
                        }
                    },
                    "bubble": {
                        "distance": 400,
                        "size": 40,
                        "duration": 2,
                        "opacity": 8,
                        "speed": 3
                    },
                    "repulse": {
                        "distance": 200,
                        "duration": 0.4
                    },
                    "push": {
                        "particles_nb": 4
                    },
                    "remove": {
                        "particles_nb": 2
                    }
                }
            },
            "retina_detect": true
        });
    </script>

    <!-- Embedded JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const carousel = document.querySelector('.carousel');
            const carouselItems = document.querySelectorAll('.carousel__item');
            const readMoreButtons = document.querySelectorAll('.card__button[data-action="open-modal"]');
            const courseModal = document.getElementById('courseModal');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const modalCourseTitle = document.getElementById('modalCourseTitle');
            const modalCourseDescription = document.getElementById('modalCourseDescription');
            const modalContactBtn = document.querySelector('.modal-contact-button'); // Get the contact button in modal

            const prevBtn = document.querySelector('.prev-btn');
            const nextBtn = document.querySelector('.next-btn');
            const langToggleBtn = document.getElementById('language-toggle-btn');
            const htmlTag = document.documentElement;

            let isDown = false;
            let startX;
            let scrollLeft;
            let autoPlayInterval;
            let isDragging = false;

            // --- Translations Data ---
            const translations = {
                'en': {
                    pageTitle: 'Embedded EG Courses',
                    langToggleText: 'العربية',
                    headerPrefix: 'Embedded EG',
                    headerSuffix: 'Courses',
                    arduinoTitle: 'Arduino Course For Kids',
                    arduinoShortDesc: '- Teach your child programming, electronic circuits, and robotics 💻\n- Suitable for ages 8 and up 🧒',
                    htmlcssTitle: 'HTML&CSS For Kids',
                    htmlcssShortDesc: 'Teach your child web design now 🌐\n- Learn HTML & CSS languages 📚\n- Suitable for ages 7 and up 🧒',
                    bootstrapTitle: 'Bootstrap For Kids',
                    bootstrapShortDesc: '- Learn how to create responsive websites for all screens 📱💻\n- Suitable for ages 7 and up 🧒\n- Prerequisites:\n- HTML & CSS languages 📚',
                    scratchTitle: 'Scratch',
                    scratchShortDesc: 'Scratch is a fun program to teach children programming basics by designing interactive games and stories in an easy and visual way 🎮📖\nSuitable for children aged 6 and above!',
                    pythonTitle: 'Python',
                    pythonShortDesc: 'Python course for children aged 8 and up, starting from basics to professionalism in a practical and interactive way, with step-by-step follow-up and real project implementation.',
                    icdlTitle: 'ICDL',
                    icdlShortDesc: 'ICDL course for kids! 🧑‍💻\nWe will learn PowerPoint, Excel, and Word together in a simple and fun way, step by step 🎉✨',
                    comingSoonTitle: 'Coming Soon',
                    readMoreBtn: 'Read More',
                    homeLink: 'Home',
                    contactUsLink: 'Contact Us',
                    copyrightText: '© 2025 Embedded_EG | All Rights Reserved',
                    modalContactBtn: 'Contact us via WhatsApp',
                    // Full descriptions for modal
                    arduinoFullDesc: `
                        This course introduces children to the exciting world of programming and electronics using Arduino. They will learn:
                        - Basic programming concepts through hands-on projects.
                        - How electronic circuits work and how to build simple ones.
                        - The fundamentals of robotics and how to create their own small robots.
                        The curriculum is designed to be fun and interactive, fostering logical thinking, problem-solving skills, and creativity.
                        Suitable for children aged 8 years and above. No prior experience in programming or electronics is required.
                    `,
                    htmlcssFullDesc: `
                        Empower your child to design their own websites! This course covers:
                        - The core concepts of HTML (HyperText Markup Language) for structuring web content.
                        - The essentials of CSS (Cascading Style Sheets) for styling and layout.
                        Children will learn to create their own web pages, add text, images, colors, and basic layouts.
                        This course is a fantastic gateway into the world of web development and is suitable for children aged 7 years and above.
                    `,
                    bootstrapFullDesc: `
                        Take your child's web design skills to the next level with Bootstrap! In this course, they will learn:
                        - How to use the popular Bootstrap framework to build professional and responsive websites.
                        - Techniques to make websites look great on all devices, including desktops, tablets, and smartphones.
                        - How to utilize pre-built components for efficient and rapid design.
                        This course is suitable for children aged 7 years and above.
                        Prerequisites: A solid understanding of HTML and CSS is required.
                    `,
                    scratchFullDesc: `
                        Scratch is a vibrant and engaging visual programming language designed specifically for children. Through this course, kids will:
                        - Learn fundamental programming concepts by dragging and dropping colorful code blocks.
                        - Create their own interactive stories, animations, and games.
                        - Develop critical thinking, problem-solving, and creative skills in a playful environment.
                        This course is perfect for children aged 6 years and above, providing a strong foundation for future coding endeavors.
                    `,
                    pythonFullDesc: `
                        Introduce your child to real-world programming with Python! This course, designed for children aged 8 and up, covers:
                        - Python basics, from variables and data types to loops and functions.
                        - Practical, hands-on coding with interactive exercises.
                        - Step-by-step guidance through building real projects.
                        The focus is on practical application and fostering computational thinking and analytical skills. No prior programming experience is needed.
                    `,
                    icdlFullDesc: `
                        The ICDL (International Computer Driving Licence) course for children is designed to equip them with essential computer literacy skills. They will learn:
                        - How to effectively use Microsoft Word for document creation and editing.
                        - The basics of Microsoft Excel for managing and analyzing data in spreadsheets.
                        - How to create engaging presentations using Microsoft PowerPoint.
                        This course is suitable for children aged 7 years and above, helping them prepare for the digital demands of the future in a simple and fun way.
                    `,
                    comingSoonFullDesc: `
                        We are constantly working to add new and innovative courses to develop your children's skills in technology and programming.
                        Stay tuned for the latest additions!
                    `
                },
                'ar': {
                    pageTitle: 'كورسات Embedded EG',
                    langToggleText: 'English',
                    headerPrefix: 'كورسات',
                    headerSuffix: 'Embedded EG',
                    arduinoTitle: 'كورس الأردوينو للأطفال',
                    arduinoShortDesc: '- علم ابنك البرمجة و الدوائر الالكترونية و صناعة الروبوتات 💻\n- مناسب من عمر ٨ سنوات 🧒',
                    htmlcssTitle: 'HTML & CSS للأطفال',
                    htmlcssShortDesc: 'علم ابنك تصميم المواقع الان 🌐\n- تعلم لغة Html و Css 📚\n- مناسب من عمر ٧ سنوات 🧒',
                    bootstrapTitle: 'Bootstrap للأطفال',
                    bootstrapShortDesc: '- تعلم ازاي ينشئ مواقع متوافقة مع جميع الشاشات 📱💻\n- مناسب من عمر ٧ سنوات 🧒\n- يشترط معرفة:\n- لغة Html و Css 📚',
                    scratchTitle: 'سكراتش',
                    scratchShortDesc: 'سكراتش هو برنامج ممتع لتعليم الأطفال أساسيات البرمجة من خلال تصميم ألعاب وقصص تفاعلية بطريقة سهلة ومرئية 🎮📖\nمناسب للأطفال من عمر 6 سنوات فما فوق!',
                    pythonTitle: 'بايثون',
                    pythonShortDesc: 'كورس بايثون للأطفال من سن 8 سنوات، بنبدأ من الأساسيات لحد الاحتراف بطريقة عملية وتفاعلية، مع متابعة خطوة بخطوة وتنفيذ مشاريع حقيقية',
                    icdlTitle: 'ICDL',
                    icdlShortDesc: 'كورس ICDL للأطفال! 🧑‍💻\nهنتعلم مع بعض باوربوينت، إكسل، ووورد بشكل بسيط وممتع خطوة بخطوة 🎉✨',
                    comingSoonTitle: 'قريباً',
                    readMoreBtn: 'اقرأ المزيد',
                    homeLink: 'الرئيسية',
                    contactUsLink: 'تواصل معنا',
                    copyrightText: '© 2025 Embedded_EG | جميع الحقوق محفوظة',
                    modalContactBtn: 'تواصل معنا عبر واتساب',
                    // Full descriptions for modal
                    arduinoFullDesc: `
                        يقدم هذا الكورس للأطفال عالمًا مثيرًا من البرمجة والإلكترونيات باستخدام الأردوينو. سيتعلمون:
                        - مفاهيم البرمجة الأساسية من خلال مشاريع عملية.
                        - كيفية عمل الدوائر الإلكترونية وكيفية بناء دوائر بسيطة.
                        - أساسيات الروبوتات وكيفية إنشاء روبوتاتهم الصغيرة.
                        تم تصميم المنهج ليكون ممتعًا وتفاعليًا، مما يعزز التفكير المنطقي ومهارات حل المشكلات والإبداع.
                        مناسب للأطفال من عمر 8 سنوات فما فوق. لا يتطلب أي خبرة سابقة في البرمجة أو الإلكترونيات.
                    `,
                    htmlcssFullDesc: `
                        امنح طفلك القدرة على تصميم مواقع الويب الخاصة به! يغطي هذا الكورس:
                        - المفاهيم الأساسية للغة HTML (لغة ترميز النص التشعبي) لهيكلة محتوى الويب.
                        - أساسيات CSS (أوراق الأنماط المتتالية) للتصميم والتخطيط.
                        سيتعلم الأطفال إنشاء صفحات الويب الخاصة بهم، وإضافة النصوص والصور والألوان والتخطيطات الأساسية.
                        هذا الكورس هو بوابة رائعة لدخول عالم تطوير الويب وهو مناسب للأطفال من عمر 7 سنوات فما فوق.
                    `,
                    bootstrapFullDesc: `
                        ارفع مهارات طفلك في تصميم الويب إلى المستوى التالي مع Bootstrap! في هذا الكورس، سيتعلمون:
                        - كيفية استخدام إطار عمل Bootstrap الشهير لبناء مواقع ويب احترافية ومتجاوبة.
                        - تقنيات لجعل مواقع الويب تبدو رائعة على جميع الأجهزة، بما في ذلك أجهزة الكمبيوتر المكتبية والأجهزة اللوحية والهواتف الذكية.
                        - كيفية الاستفادة من المكونات الجاهزة للتصميم السريع والفعال.
                        هذا الكورس مناسب للأطفال من عمر 7 سنوات فما فوق.
                        المتطلبات الأساسية: فهم قوي لأساسيات HTML و CSS مطلوب.
                    `,
                    scratchFullDesc: `
                        سكراتش هي لغة برمجة مرئية نابضة بالحياة وجذابة مصممة خصيصًا للأطفال. من خلال هذا الكورس، سيتعلم الأطفال:
                        - مفاهيم البرمجة الأساسية عن طريق سحب وإفلات كتل التعليمات البرمجية الملونة.
                        - إنشاء قصصهم التفاعلية ورسومهم المتحركة وألعابهم الخاصة.
                        - تطوير التفكير النقدي وحل المشكلات والمهارات الإبداعية في بيئة مرحة.
                        هذا الكورس مثالي للأطفال من عمر 6 سنوات فما فوق، ويوفر أساسًا قويًا لمساعي البرمجة المستقبلية.
                    `,
                    pythonFullDesc: `
                        قدم لطفلك البرمجة الواقعية مع بايثون! يغطي هذا الكورس، المصمم للأطفال من عمر 8 سنوات فما فوق:
                        - أساسيات بايثون، من المتغيرات وأنواع البيانات إلى الحلقات والدوال.
                        - برمجة عملية وتطبيقية مع تمارين تفاعلية.
                        - إرشادات خطوة بخطوة من خلال بناء مشاريع حقيقية.
                        التركيز ينصب على التطبيق العملي وتعزيز التفكير الحسابي والمهارات التحليلية. لا توجد خبرة سابقة في البرمجة مطلوبة.
                    `,
                    icdlFullDesc: `
                        تم تصميم كورس ICDL (الرخصة الدولية لقيادة الحاسوب) للأطفال لتزويدهم بمهارات محو الأمية الحاسوبية الأساسية. سيتعلمون:
                        - كيفية استخدام Microsoft Word بفعالية لإنشاء المستندات وتحريرها.
                        - أساسيات Microsoft Excel لإدارة وتحليل البيانات في جداول البيانات.
                        - كيفية إنشاء عروض تقديمية جذابة باستخدام Microsoft PowerPoint.
                        هذا الكورس مناسب للأطفال من عمر 7 سنوات فما فوق، ويساعدهم على الاستعداد للمتطلبات الرقمية للمستقبل بطريقة بسيطة وممتعة.
                    `,
                    comingSoonFullDesc: `
                        نحن نعمل باستمرار على إضافة كورسات جديدة ومبتكرة لتنمية مهارات أطفالكم في مجالات التكنولوجيا والبرمجة.
                        تابعونا لمعرفة أحدث الإضافات!
                    `
                }
            };

            // --- Language Switching Functionality ---
            const setLanguage = (lang) => {
                // Set HTML lang attribute
                htmlTag.lang = lang;

                // Set text direction
                htmlTag.dir = (lang === 'ar') ? 'rtl' : 'ltr';

                // Update all elements with data-key attribute
                document.querySelectorAll('[data-key]').forEach(element => {
                    const key = element.getAttribute('data-key');
                    // Handle special cases like meta tags
                    if (element.tagName === 'META' && element.hasAttribute('property') && element.getAttribute('property') === 'og:description') {
                        element.setAttribute('content', translations[lang][key]);
                    } else if (element.tagName === 'TITLE') {
                        element.textContent = translations[lang][key];
                    }
                    // For regular text content
                    else if (translations[lang][key]) {
                        element.textContent = translations[lang][key];
                    }
                });

                // Update specific elements that need dynamic content (like card short descriptions)
                carouselItems.forEach(item => {
                    const courseId = item.dataset.courseId;
                    const shortDescElement = item.querySelector('.card__description');
                    const titleElement = item.querySelector('.card__title');
                    const readMoreButton = item.querySelector('.card__button');

                    if (shortDescElement && translations[lang][`${courseId}ShortDesc`]) {
                        shortDescElement.textContent = translations[lang][`${courseId}ShortDesc`];
                        shortDescElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';
                    }
                    if (titleElement && translations[lang][`${courseId}Title`]) {
                        titleElement.textContent = translations[lang][`${courseId}Title`];
                    }
                    if (readMoreButton && translations[lang]['readMoreBtn']) {
                        readMoreButton.textContent = translations[lang]['readMoreBtn'];
                    }
                });

                // Update modal contact button text
                if (modalContactBtn && translations[lang]['modalContactBtn']) {
                    modalContactBtn.textContent = translations[lang]['modalContactBtn'];
                    modalContactBtn.dir = (lang === 'ar') ? 'rtl' : 'ltr';
                }

                // Update language toggle button text
                if (langToggleBtn) {
                    langToggleBtn.querySelector('span').textContent = (lang === 'en') ? 'العربية' : 'English';
                }

                // Store preference
                localStorage.setItem('selectedLanguage', lang);
            };

            // Toggle language on button click
            if (langToggleBtn) {
                langToggleBtn.addEventListener('click', () => {
                    const currentLang = htmlTag.lang;
                    const newLang = (currentLang === 'en') ? 'ar' : 'en';
                    setLanguage(newLang);
                });
            }

            // Load language preference on page load
            const savedLang = localStorage.getItem('selectedLanguage') || 'en'; // Default to English
            setLanguage(savedLang);

            // --- Carousel Dragging Functionality ---
            carousel.addEventListener('mousedown', (e) => {
                isDown = true;
                isDragging = false; // Reset dragging flag at the start of a new interaction
                carousel.classList.add('active-drag');
                startX = e.pageX - carousel.offsetLeft;
                scrollLeft = carousel.scrollLeft;
                stopAutoPlay(); // Stop auto-play when user interacts
            });

            carousel.addEventListener('mouseleave', () => {
                if (isDown) { // Only resume if mouse was down and left
                    isDown = false;
                    carousel.classList.remove('active-drag');
                    startAutoPlay(); // Resume auto-play
                }
            });

            carousel.addEventListener('mouseup', (e) => {
                isDown = false;
                carousel.classList.remove('active-drag');
                startAutoPlay(); // Resume auto-play
            });

            carousel.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                e.preventDefault();
                const x = e.pageX - carousel.offsetLeft;
                const walk = (x - startX) * 0.8; // Adjusted multiplier for smoother, less sensitive drag
                carousel.scrollLeft = scrollLeft - walk;
                // Set isDragging to true if the mouse moves while the button is down
                if (Math.abs(x - startX) > 5) { // Only consider it a drag if moved more than 5px
                    isDragging = true;
                }
            });

            // --- Auto-play Functionality ---
            const getScrollAmount = () => {
                const item = carousel.querySelector('.carousel__item');
                if (!item) return 0;
                const gap = parseFloat(getComputedStyle(carousel).gap) || 0;
                return item.offsetWidth + gap;
            };

            const startAutoPlay = () => {
                clearInterval(autoPlayInterval);
                autoPlayInterval = setInterval(() => {
                    const scrollAmount = getScrollAmount();
                    if (scrollAmount === 0) { // If no items, stop autoplay
                        stopAutoPlay();
                        return;
                    }
                    const currentScroll = carousel.scrollLeft;
                    const maxScroll = carousel.scrollWidth - carousel.clientWidth;

                    if (currentScroll + scrollAmount >= maxScroll) {
                        carousel.scrollTo({
                            left: 0,
                            behavior: 'smooth'
                        });
                    } else {
                        carousel.scrollBy({
                            left: scrollAmount,
                            behavior: 'smooth'
                        });
                    }
                }, 6000);
            };

            const stopAutoPlay = () => {
                clearInterval(autoPlayInterval);
            };

            carousel.addEventListener('mouseenter', stopAutoPlay);
            carousel.addEventListener('mouseleave', startAutoPlay);
            carousel.addEventListener('focusin', stopAutoPlay);
            carousel.addEventListener('focusout', startAutoPlay);

            // --- Carousel Navigation Buttons Functionality ---
            if (prevBtn) {
                prevBtn.addEventListener('click', () => {
                    stopAutoPlay();
                    const scrollAmount = getScrollAmount();
                    carousel.scrollBy({
                        left: -scrollAmount,
                        behavior: 'smooth'
                    });
                    // Resume autoplay after a short delay to allow scroll animation to finish
                    setTimeout(startAutoPlay, 500);
                });
            }

            if (nextBtn) {
                nextBtn.addEventListener('click', () => {
                    stopAutoPlay();
                    const scrollAmount = getScrollAmount();
                    carousel.scrollBy({
                        left: scrollAmount,
                        behavior: 'smooth'
                    });
                    // Resume autoplay after a short delay to allow scroll animation to finish
                    setTimeout(startAutoPlay, 500);
                });
            }

            // --- Active Item Highlighting ---
            const updateActiveItem = () => {
                const items = document.querySelectorAll('.carousel__item');
                const carouselRect = carousel.getBoundingClientRect();
                const carouselCenter = carouselRect.left + carouselRect.width / 2;

                items.forEach(item => {
                    const itemRect = item.getBoundingClientRect();
                    const itemCenter = itemRect.left + itemRect.width / 2;

                    const threshold = itemRect.width * 0.4;
                    if (Math.abs(carouselCenter - itemCenter) < threshold) {
                        item.classList.add('is-active');
                    } else {
                        item.classList.remove('is-active');
                    }
                });
            };

            let scrollTimeout;
            carousel.addEventListener('scroll', () => {
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(updateActiveItem, 100);
            });

            // --- Click-to-Reveal Card Functionality ---
            carouselItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    // Prevent click action if it was a drag
                    if (isDragging) {
                        e.preventDefault(); // Prevent default click behavior
                        isDragging = false; // Reset flag
                        return;
                    }

                    const card = item.querySelector('.card');
                    
                    // Close any other open cards first
                    document.querySelectorAll('.card.is-revealed').forEach(openCard => {
                        if (openCard !== card) {
                            openCard.classList.remove('is-revealed');
                        }
                    });

                    // Toggle the 'is-revealed' class on the clicked card
                    card.classList.toggle('is-revealed');
                });
            });

            // Close card when clicking outside of any card
            document.addEventListener('click', (e) => {
                const clickedInsideCarouselItem = e.target.closest('.carousel__item');
                if (!clickedInsideCarouselItem) {
                    document.querySelectorAll('.card.is-revealed').forEach(openCard => {
                        openCard.classList.remove('is-revealed');
                    });
                }
            });

            // --- Modal Functionality (updated to use translations) ---
            const openModal = (courseId) => {
                const currentLang = htmlTag.lang;
                const fullDescKey = `${courseId}FullDesc`;
                const titleKey = `${courseId}Title`;

                const details = translations[currentLang][fullDescKey];
                const title = translations[currentLang][titleKey];

                if (details && title) {
                    modalCourseTitle.textContent = title;
                    modalCourseDescription.textContent = details;
                    
                    // Set direction for Arabic text in modal
                    if (currentLang === 'ar') {
                        modalCourseDescription.setAttribute('dir', 'rtl');
                        modalCourseTitle.setAttribute('dir', 'rtl');
                    } else {
                        modalCourseDescription.removeAttribute('dir');
                        modalCourseTitle.removeAttribute('dir');
                    }
                    
                    courseModal.classList.remove('closing');
                    courseModal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                } else {
                    // Fallback for "Coming Soon" or missing translations
                    modalCourseTitle.textContent = translations[currentLang]['comingSoonTitle'];
                    modalCourseDescription.textContent = translations[currentLang]['comingSoonFullDesc'] || translations[currentLang]['comingSoonTitle']; // Use full desc if available, else title
                    modalCourseDescription.removeAttribute('dir'); // Default to LTR for generic message
                    modalCourseTitle.removeAttribute('dir');
                    courseModal.classList.remove('closing');
                    courseModal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                }
            };

            const closeModal = () => {
                courseModal.classList.add('closing');
                courseModal.addEventListener('transitionend', function handler() {
                    courseModal.classList.remove('active');
                    courseModal.classList.remove('closing');
                    document.body.style.overflow = '';
                    courseModal.removeEventListener('transitionend', handler);
                }, { once: true });
            };

            readMoreButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const courseId = e.target.closest('.carousel__item').dataset.courseId;
                    openModal(courseId);
                });
            });

            closeModalBtn.addEventListener('click', closeModal);

            courseModal.addEventListener('click', (e) => {
                if (e.target === courseModal) {
                    closeModal();
                }
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && courseModal.classList.contains('active')) {
                    closeModal();
                }
            });


            // --- Initializations ---
            startAutoPlay();
            updateActiveItem();
        });
    </script>
</body>
</html>
